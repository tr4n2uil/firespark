function unique(a){var b={},c=[];for(var d=0,e=a.length;d<e;++d){if(a[d]in b)continue;c.push(a[d]);b[a[d]]=1}return c}function is_numeric(a){return!isNaN(Number(a))}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}var FireSpark={core:{service:{},workflow:{},helper:{},constant:{}},ui:{service:{},workflow:{},helper:{},constant:{},template:{}},smart:{service:{},workflow:{},helper:{},constant:{}}};var FS={c:{s:FireSpark.core.service,w:FireSpark.core.workflow,h:FireSpark.core.helper,c:FireSpark.core.constant},u:{s:FireSpark.ui.service,w:FireSpark.ui.workflow,h:FireSpark.ui.helper,c:FireSpark.ui.constant,t:FireSpark.ui.template},s:{s:FireSpark.smart.service,w:FireSpark.smart.workflow,h:FireSpark.smart.helper,c:FireSpark.smart.constant}};FireSpark.core.helper.CheckEmail=function(){var a=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return function(b,c){if(!a.test($(this).val())){FireSpark.core.service.CheckForm.result=false;FireSpark.core.helper.checkFail($(this),FireSpark.core.constant.validation_status+".error");return false}}}();FireSpark.core.helper.checkFail=function(a,b){return a.next(b).stop(true,true).slideDown(1e3).delay(5e3).fadeOut(1e3)};FireSpark.core.service.CheckForm={result:true,input:function(){return{required:["form"],optional:{error:"span",validations:FireSpark.core.constant.validations}}},run:function(a){FireSpark.core.service.CheckForm.result=true;FireSpark.core.constant.validation_status=a["error"];$validations=a["validations"];for(var b in $validations){$check=$validations[b];$(a["form"]+" "+$check["cls"]).each($check["helper"]);if(!FireSpark.core.service.CheckForm.result)break}a["valid"]=FireSpark.core.service.CheckForm.result;return a},output:function(){return[]}};FireSpark.core.helper.CheckMatch=function(){var a=false;return function(b,c){if(b&&a&&$(this).val()!=a){FireSpark.core.service.CheckForm.result=false;FireSpark.core.helper.checkFail($(this),FireSpark.core.constant.validation_status+".error");return false}a=$(this).val()}}();FireSpark.core.helper.CheckRequired=function(){return function(a,b){if($(this).val()==""){FireSpark.core.service.CheckForm.result=false;FireSpark.core.helper.checkFail($(this),FireSpark.core.constant.validation_status+".error");return false}}}();FireSpark.core.helper.dataOperate=function(a,b,c){switch(c){case">":return a>b;case"<":return a<b;default:return a==b}};FireSpark.core.service.DataCookie={input:function(){return{required:["key"],optional:{expires:1,value:null,path:"/"}}},run:function(a){$.cookie(a["key"],null,{path:a["path"]});$.cookie(a["key"],a["value"],{expires:a["expires"],path:a["path"]});a["valid"]=true;return a},output:function(){return[]}};FireSpark.core.service.DataEncode={input:function(){return{optional:{type:"url",data:false,url:""}}},run:function(a){var b=a["data"];var c=a["type"];var d="application/x-www-form-urlencoded";if(b!==false&&b!=""){b=b.replace(/\+/g,"%20");if(c!="url"){var e=b.split("&");var f={};for(var g=0,h=e.length;g<h;g++){var i=e[g].split("=");f[i[0]]=unescape(i[1])}a["data"]=b=f}switch(c){case"json":b=JSON.stringify(b);d="application/json";break;case"rest-id":a["url"]=a["url"]+"/"+b["id"];case"url":default:break}}a["result"]=b;a["mime"]=d;a["valid"]=true;return a},output:function(){return["data","result","mime","url"]}};FireSpark.core.helper.dataEquals=function(a,b){return a==b};FireSpark.core.helper.dataFind=function(a,b,c){return a.indexOf(b,c||0)>-1};FireSpark.core.helper.dataNormal=function(a,b){return a!=false?a:b};FireSpark.core.service.DataPush={input:function(){return{optional:{data:{}}}},run:function(a){$data=a["data"];$params=a["args"];for(var b in $params){$value=$params[b];$data[$value]=a[$value]}a["result"]=$data;a["valid"]=true;return a},output:function(){return["result"]}};FireSpark.core.service.DataRegistry={input:function(){return{required:["key"],optional:{value:false,expiry:false,check:false}}},run:function(a){if(a["value"]===false){a["value"]=Snowblozm.Registry.get(a["key"])}else{if(a["check"]&&(Snowblozm.Registry.get(a["key"])||false)){a["valid"]=false;return a}Snowblozm.Registry.save(a["key"],a["value"])}a["valid"]=true;return a},output:function(){return["value"]}};FireSpark.core.service.DataSelect={out:[],input:function(){return{optional:{data:{},params:{}}}},run:function(a){var b=a["data"];var c=a["params"];FireSpark.core.service.DataSelect.out=[];for(var d in c){var e=c[d];a[e]=b[d];FireSpark.core.service.DataSelect.out.push(e)}a["valid"]=true;return a},output:function(){return FireSpark.core.service.DataSelect.out}};FireSpark.core.helper.dataShort=function(a,b,c){var d=b||15;var e=d-5;return c?a.length<d?a:a.substr(0,e)+" ...":a};FireSpark.core.helper.dataSplit=function(a,b){b=b||":";return a.split(b)};FireSpark.core.helper.dataStrip=function(a){a=a.replace(/<\/?[a-z][a-z0-9]*[^<>]*>/ig,"");var b=a.indexOf("<");if(b>0){a=a.substring(0,b)}return a};FireSpark.core.helper.LaunchHash={idle:true,current:"",launch:function(a){if(FireSpark.core.helper.LaunchHash.idle&&FireSpark.core.helper.LaunchHash.current!=a){FireSpark.core.helper.LaunchHash.current=a;return Snowblozm.Kernel.launch(FireSpark.core.helper.LaunchHash.current)}return false}};FireSpark.core.service.LaunchMessage={input:function(){return{optional:{data:{},launch:false,status:"valid",message:"message"}}},run:function(a){if(a["launch"]){var b=a["data"]||{};if(b[a["status"]]||false){var c=a["message"];var d=b[c]||false;if(d){d["service"]=Snowblozm.Registry.load(a["launch"]);return Snowblozm.Kernel.run(d,{})}}}a["valid"]=true;return a},output:function(){return[]}};FireSpark.core.service.LaunchNavigator={input:function(){return{optional:{data:[],launch:false,escaped:false}}},run:function(a){if(a["launch"]){$data=a["data"];if($data.length){for(var b in $data){Snowblozm.Kernel.launch($data[b],a["escaped"])}}else{Snowblozm.Kernel.launch(a["launch"],a["escaped"])}}a["valid"]=true;return a},output:function(){return[]}};FireSpark.core.service.LaunchTrigger={input:function(){return{required:["selector","attribute"],optional:{event:"click",escaped:false,hash:false,pathname:false}}},run:function(a){$(a["selector"]).live(a["event"],function(){FireSpark.core.helper.LaunchHash.idle=false;var b=$root.attr(a["attribute"]);if(a["attribute"]=="href"){b=unescape(b)}$result=Snowblozm.Kernel.launch(b,a["escaped"],{root:$(this)});if(a["hash"]){window.location.hash=b}FireSpark.core.helper.LaunchHash.idle=true;return $result});a["valid"]=true;return a},output:function(){return[]}};FireSpark.core.service.LoadAjax={input:function(){return{required:["url","workflow"],optional:{data:"",type:"json",request:"POST",process:false,mime:"application/x-www-form-urlencoded",errorflow:false,stop:false,validity:false,sync:false}}},run:function(a){FireSpark.core.helper.LoadBarrier.start();var b={};for(var c in a){b[c]=a[c]}$.ajax({url:a["url"],data:a["data"],dataType:a["type"],type:a["request"],processData:a["process"],contentType:a["mime"],async:a["sync"]?false:true,success:function(c,d,e){b["data"]=c;if(b["validity"]&&(b["data"]["valid"]===false||(b["data"]["message"]||false)&&b["data"]["message"]["valid"]===false)){try{if(a["errorflow"]){Snowblozm.Kernel.execute(a["errorflow"],b)}FireSpark.core.helper.LoadBarrier.end()}catch(f){FireSpark.core.helper.LoadBarrier.end();if(console||false){console.log("Exception : "+f)}}}else{try{Snowblozm.Kernel.execute(a["workflow"],b);FireSpark.core.helper.LoadBarrier.end()}catch(f){FireSpark.core.helper.LoadBarrier.end();if(console||false){console.log("Exception : "+f)}}}},error:function(c,d,e){b["error"]=e;b["data"]=FireSpark.core.constant.loaderror+'<span class="hidden"> [Error : '+e+"]</span>";try{if(a["errorflow"]){Snowblozm.Kernel.execute(a["errorflow"],b)}FireSpark.core.helper.LoadBarrier.end()}catch(f){FireSpark.core.helper.LoadBarrier.end();if(console||false){console.log("Exception : "+f)}}}});return{valid:a["stop"]}},output:function(){return[]}};FireSpark.core.helper.LoadBarrier={requests:0,lock:false,barrier_function:[],barrier_args:[],start:function(){this.requests++},end:function(){this.requests--;if(this.requests<=0){this.requests=0;var a=this.barrier_function;this.barrier_function=[];var b=this.barrier_args;this.barrier_args=[];if(a.length){for(var c in a){try{a[c](b[c])}catch(d){if(console){console.log("Exception : "+d)}}}}}},barrier:function(a,b){this.barrier_function.push(a);this.barrier_args.push(b)}};FireSpark.core.service.LoadBarrier={input:function(){return{optional:{barrier:false}}},run:function(a){if(a["barrier"]){FireSpark.core.helper.LoadBarrier.barrier(function(){Snowblozm.Kernel.execute(a["barrier"],a)})}a["barrier"]=false;a["valid"]=true;return a},output:function(){return["barrier"]}};FireSpark.core.service.LoadIframe={input:function(){return{required:["agent","workflow"],optional:{type:"json",errorflow:false}}},run:function(a){$mem={};for(var b in a){$mem[b]=a[b]}var c=new Date;var d="firespark_iframe_"+c.getTime();$(a["agent"]).attr("target",d);var e=$('<iframe id="'+d+'" name="'+d+'" style="width:0;height:0;border:0px solid #fff;"></iframe>').insertAfter(a["agent"]).bind("load",function(){try{var b=FireSpark.core.helper.windowFrame(d);var c=b.document.body.innerHTML;switch(a["type"]){case"html":$mem["data"]=c;break;case"json":default:$mem["data"]=$.parseJSON(c);break}try{Snowblozm.Kernel.execute(a["workflow"],$mem)}catch(e){if(console||false){console.log("Exception : "+e)}}}catch(f){if(console||false){console.log("Exception : "+f)}$mem["error"]=f.description;$mem["result"]=FireSpark.core.constant.loaderror+'<span class="hidden"> [Error :'+f.description+"]</span>";$mem["data"]={valid:false,msg:FireSpark.core.constant.loaderror,code:500,details:f.description};try{if(a["errorflow"]){Snowblozm.Kernel.execute(a["errorflow"],$mem)}}catch(e){if(console||false){console.log("Exception : "+e)}}}}).bind("error",function(b){$mem["error"]=b;$mem["result"]=FireSpark.core.constant.loaderror;try{if(a["errorflow"]){Snowblozm.Kernel.execute(a["errorflow"],$mem)}}catch(c){if(console||false){console.log("Exception : "+c)}}});window.setTimeout(function(){e.remove()},15e4);return{valid:true}},output:function(){return[]}};FireSpark.core.helper.readControl=function(a){switch(a){case"info":return"View Entity";case"edit":return"Edit Entity";case"list":return"List Children";case"add":return"Add Children";case"remove":return"Remove Children";default:return"";break}};FireSpark.core.service.ReadData={input:function(){return{required:["cntr"],optional:{cls:"data"}}},run:function(a){var b=new Date;var c="_ts="+b.getTime();var d=function(a,b){if($(this).attr("name")||false){c=c+"&"+$(this).attr("name")+"="+$(this).val()}};$(a["cntr"]+" ."+a["cls"]).each(d);a["data"]=c;a["valid"]=true;return a},output:function(){return["data"]}};FireSpark.core.helper.readDate=function(a){var b=new Date(a);return b.toDateString()};FireSpark.core.helper.readFileSize=function(a){var b=a/1024;if(b>1024){var c=b/1024;return c.toFixed(2)+" MB"}return b.toFixed(2)+" KB"};FireSpark.core.service.ReadForm={input:function(){return{required:["form"]}},run:function(a){var b=$(a["form"]);a["url"]=b.attr("action");try{a["request"]=b.attr("method").toUpperCase()}catch(c){a["request"]="POST"}var d=b.serialize();var e=new Date;d=d+"&_ts="+e.getTime();a["data"]=d;a["valid"]=true;return a},output:function(){return["url","request","data"]}};FireSpark.core.helper.readGender=function(a){switch(a){case"M":return"Male";case"F":return"Female";case"N":default:return"";break}};FireSpark.core.helper.readTime=function(a){var b=new Date(a);var c=b.getHours();if(c<10)c="0"+c/1;var d=b.getMinutes();if(d<10)d="0"+d/1;return b.toDateString()+" "+c+":"+d+" hrs"};FireSpark.core.service.WindowConfirm={input:function(){return{required:["value"],optional:{confirm:false}}},run:function(a){if(a["confirm"]){a["valid"]=confirm(a["value"]);return a}a["valid"]=true;return a},output:function(){return[]}};FireSpark.core.helper.windowFrame=function(a){for(var b=window.frames.length-1;b>=0;b--){var c=window.frames[b];if(c.name||false){if(c.name==a){return c}}}return false};FireSpark.core.workflow.WindowLogin={input:function(){return{optional:{key:"sessionid",value:null,expires:1,path:"/","continue":false}}},run:function(a){return Snowblozm.Kernel.execute([{service:FireSpark.core.service.DataCookie},{service:FireSpark.core.service.WindowReload}],a)},output:function(){return[]}};FireSpark.core.service.WindowReload={input:function(){return{optional:{"continue":false}}},run:function(a){if(a["continue"]){window.location=a["continue"]}else{window.location.reload()}a["valid"]=false;return a},output:function(){return[]}};FireSpark.ui.helper.containerPages=function(a,b,c){var d=[];for(var e=0,f=0;e<Number(a);e+=Number(c),f++){d.push(f!=Number(b))}return d};FireSpark.ui.service.ContainerRemove={input:function(){return{optional:{key:"ui-global",id:"0",ins:"#ui-global-0"}}},run:function(a){a["key"]=a[0]||a["key"];a["id"]=a[1]||a["id"];a["ins"]=a[2]||a["ins"];var b=a["key"]+"-"+a["id"];a=Snowblozm.Kernel.execute([{service:FireSpark.ui.service.ElementContent,element:"."+b,select:true,action:"remove",animation:"none"},{service:FireSpark.smart.workflow.InterfaceTile,input:{cntr:"ins"}}],a);a["valid"]=false;return a},output:function(){return[]}};FireSpark.ui.service.ContainerRender={input:function(){return{optional:{key:"ui-global",id:"0",ins:"#ui-global-0",root:false,bg:false,tpl:[{"#tpl-default":">.bands"}],tile:false,act:"first",data:{},anm:"fadein",dur:1e3,dly:0,errorflow:{service:FireSpark.ui.workflow.TemplateApply,tpl:"tpl-default"},mv:FireSpark.smart.constant.moveup,mvdur:FireSpark.smart.constant.moveduration}}},run:function(a){if(a["data"]["valid"]||false){if(a["data"]["message"]||false){if(a["data"]["message"]["id"]||false){a["id"]=a["data"]["message"]["id"]}}var b=a["key"]+"-"+a["id"];FireSpark.smart.helper.dataState(FireSpark.smart.constant.initmsg,true);var c=[{service:FireSpark.ui.service.ElementContent,element:"."+b+FireSpark.ui.constant.replacesel,select:true,action:"remove"}];var d=a["tpl"];for(var e in d){c=c.concat([{service:FireSpark.ui.workflow.TemplateApply,input:{action:"act",duration:"dur"},element:a["ins"]+d[e]["sel"],select:true,template:d[e]["tpl"],animation:"none",delay:0}])}if(a["bg"]===false){c.push({service:FireSpark.smart.workflow.InterfaceTile,input:{cntr:"ins"}})}return Snowblozm.Kernel.execute(c,a)}else if(a["errorflow"]){return Snowblozm.Kernel.execute(a["errorflow"],a)}else return{valid:false}},output:function(){return["element"]}};FireSpark.ui.service.ElementContent={input:function(){return{required:["element"],optional:{select:false,data:"",animation:"fadein",duration:1e3,delay:0,action:"all"}}},run:function(a){if(a["select"]){var b=$(a["element"]);if(!b.length&&a["action"]!="remove"){b=$(FireSpark.ui.constant.maindiv)}}else{b=a["element"]}var c=a["animation"];var d=a["duration"];if(c=="fadein"||c=="slidein"){b.hide()}switch(a["action"]){case"all":b=b.html(a["data"]);b.trigger("load");break;case"first":b=b.prepend(a["data"]);b.trigger("load");break;case"last":b=b.append(a["data"]);b.trigger("load");break;case"replace":b=$(a["data"]).replaceAll(b);b.trigger("load");break;case"remove":b.remove();break;default:break}if(a["action"]!="remove"){b.stop(true,true).delay(a["delay"]);switch(c){case"fadein":b.fadeIn(d);break;case"fadeout":b.fadeOut(d);break;case"slidein":b.slideDown(d);break;case"slideout":b.slideUp(d);break;case"none":break;default:b.html("Animation type not supported").fadeIn(d);break}}a["element"]=b;a["valid"]=true;return a},output:function(){return["element"]}};FireSpark.ui.service.ElementSection={input:function(){return{optional:{element:false,select:false,content:false,child:".tile-content",animation:"fadein",duration:500,delay:0}}},run:function(a){if(a["select"]&&a["element"]){var b=$(a["element"]);if(!b.length){return{valid:false}}}else if(a["select"]&&a["content"]){var b=$(a["content"]).parent();if(!b.length){return{valid:false}}}else{b=a["element"]}b.children(a["child"]).hide();if(a["content"]){b=b.children(a["content"])}else{b=b.children(a["child"]).eq(0)}var c=a["animation"];var d=a["duration"];b.trigger("load");b.delay(a["delay"]);switch(c){case"fadein":b.fadeIn(d);break;case"slidein":b.slideDown(d);break;default:b.html("Animation type not supported").fadeIn(d);break}a["element"]=b;a["valid"]=false;return a},output:function(){return["element"]}};FireSpark.ui.service.ElementState={input:function(){return{optional:{element:false,disabled:false}}},run:function(a){if(a["element"]){if(a["disabled"]){$(a["element"]).attr("disabled",true)}else{$(a["element"]).removeAttr("disabled")}}a["valid"]=true;return a},output:function(){return[]}};FireSpark.ui.service.ElementTab={input:function(){return{required:["tabui","title"],optional:{autoload:false,taburl:false}}},run:function(a){var b=Snowblozm.Registry.get(a["tabui"]);a["element"]=b.add(a["title"],a["autoload"],a["taburl"]);a["valid"]=true;return a},output:function(){return["element"]}};FireSpark.ui.service.ElementTrigger={input:function(){return{optional:{element:false,event:false}}},run:function(a){if(a["element"]&&a["event"]){$(a["element"]).trigger(a["event"])}a["valid"]=true;return a},output:function(){return[]}};FireSpark.ui.template.Default=$.template('\n\t<span class="{{if valid}}success{{else}}error{{/if}}">{{html msg}}</span>\n\t<span class="hidden">${details}</span>\n');Snowblozm.Registry.save("tpl-default",FireSpark.ui.template.Default);FireSpark.ui.service.TemplateApply={input:function(){return{required:["template"],optional:{data:{}}}},run:function(a){a["result"]=$.tmpl(a["template"],a["data"]);a["valid"]=true;return a},output:function(){return["result"]}};FireSpark.ui.workflow.TemplateApply={input:function(){return{required:["element"],optional:{data:{},template:"tpl-default",select:false,animation:"fadein",duration:1e3,delay:0,action:"all"}}},run:function(a){return Snowblozm.Kernel.execute([{service:FireSpark.ui.service.TemplateRead},{service:FireSpark.ui.service.TemplateApply,input:{template:"result"}},{service:FireSpark.ui.service.ElementContent,input:{data:"result"}}],a)},output:function(){return["element"]}};FireSpark.ui.workflow.TemplateBind={input:function(){return{required:["cntr"],optional:{select:true,anm:"fadein",dur:1e3,dly:0,action:"all",tpl:"tpl-default",data:""}}},run:function(a){a=Snowblozm.Kernel.execute([{service:FireSpark.core.service.DataEncode,type:"json"},{service:FireSpark.ui.workflow.TemplateApply,input:{element:"cntr",template:"tpl",animation:"anm",duration:"dur",delay:"dly",action:"act"}}],a);a["valid"]=true;return a},output:function(){return["element"]}};FireSpark.ui.service.TemplateRead={input:function(){return{optional:{template:"tpl-default"}}},run:function(a){$tpl=a["template"];$template=Snowblozm.Registry.get($tpl);if(!$template&&$tpl.charAt(0)=="#"){$template=$.template($tpl);if($template){Snowblozm.Registry.save($tpl,$template)}}a["result"]=$template;a["valid"]=$template||false?true:false;return a},output:function(){return["result"]}};FireSpark.ui.template.Tiles=$.template('\n\t<ul class="hover-menu horizontal tls-${key}-${id}">\n\t\t<span class="tilehead">\n\t\t\t${tilehead}\n\t\t\t{{if FireSpark.core.helper.dataEquals(close, true)}}\n\t\t\t\t<a class="launch close hover" href="#/close/${key}/${id}/${ins}/" title="Close"></a>\n\t\t\t{{/if}}\n\t\t</span>\n\t\t{{each tiles}}\n\t\t<li>\n\t\t\t{{if FireSpark.core.helper.dataEquals(!privileged || (privileged && admin), true)}}\n\t\t\t\t{{if tpl}}\n\t\t\t\t\t{{tmpl tpl}}\n\t\t\t\t{{else urlhash}}\n\t\t\t\t\t<a href="${urlhash}" class="navigate tile ${style}">${name}</a>\n\t\t\t\t{{else}}\n\t\t\t\t\t<a href="!/view/${tile}-${id}" class="navigate tile ${style}">${name}</a>\n\t\t\t\t{{/if}}\n\t\t\t{{/if}}\n\t\t</li>\n\t\t{{/each}}\n\t</ul>\n');Snowblozm.Registry.save("tpl-tiles",FireSpark.ui.template.Tiles);FireSpark.ui.template.Bands=$.template("\n\t{{each tiles}}\n\t\t<span></span>\n\t\t{{if $value.tiletpl}}\n\t\t\t{{tmpl $value.tiletpl}}\n\t\t{{/if}}\n\t{{/each}}\n");Snowblozm.Registry.save("tpl-bands",FireSpark.ui.template.Bands);FireSpark.ui.template.Container=$.template('\n\t<div class="tiles"></div>\n\t{{if inline}}<div class="bands"></div>{{/if}}\n');Snowblozm.Registry.save("tpl-container",FireSpark.ui.template.Container);FireSpark.ui.helper.transformButton=function(a,b){a.button();return a};FireSpark.ui.helper.transformCKEditor=function(a,b){var c=a;a.each(function(a,b){var d=c.attr("id")||c.attr("name");var e=CKEDITOR.instances[d]||false;if(e){try{CKEDITOR.remove(e)}catch(f){}delete e}c=c.slice(1)});a.ckeditor();return a};FireSpark.ui.helper.transformRobin=function(a,b){(function(){var c=b["total"];var d=0;window.setInterval(function e(){d++;d%=c;a.children(b["selector"]).stop(true,true).fadeOut(500).eq(d).delay(500).fadeIn(500)},b["interval"])})();return a};FireSpark.ui.helper.transformSmartpanel=function(a,b){return a.each(function(){var a=$(this),c=$.extend({display:".smart-display",edit:".smart-edit",form:".smart-form",cancel:".smart-cancel",hover:".smart-hover"},b||{},{}),d=a.find(c.display),e=a.find(c.edit),f=a.find(c.form),g=a.find(c.cancel);if(a.hasClass("smart-panel-done")){return}a.addClass("smart-panel-done");e.bind("click.smart-panel",function(){d.hide();f.show();return false});g.bind("click.smart-panel",function(){f.hide();d.show();return false});})};FireSpark.ui.helper.transformTabpanel=function(a,b){a.hide();var c=new Array;var d=b["indexstart"];var e={cache:b["cache"],collapsible:b["collapsible"],event:b["event"],tabTemplate:"<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",add:function(a,b){c[d]=$(b.panel)}};if(b["tablink"]){e.load=function(a,b){$("a",b.panel).click(function(){$(b.panel).load(this.href);return false})}}var f=a.tabs(e);a.fadeIn(1e3);$(".ui-icon-close").live("click",function(){var a=$("li",f).index($(this).parent());f.tabs("remove",a)});d--;Snowblozm.Registry.save(b["savekey"],{add:function(a,b,e){d++;var g="#ui-tab-"+d;if(b||false){g=e}f.tabs("add",g,a);f.tabs("select","#ui-tab-"+d);return c[d]}});return a};FireSpark.ui.service.TransformTrigger={input:function(){return{optional:{transforms:FireSpark.ui.constant.transforms}}},run:function(a){var b=a["transforms"];for(var c in b){$tx=b[c];$($tx["cls"]).live("load",function(){var a=$tx["helper"];a($(this),$tx["config"])})}a["valid"]=true;return a},output:function(){return[]}};FireSpark.ui.helper.transformWysiwyg=function(a,b){a.children(b["sel"]).wysiwyg();return a};FireSpark.smart.service.DataImport={input:function(){return{required:["imports","workflow"]}},run:function(a){var b=a["workflow"];var c=a["imports"];FireSpark.core.helper.LoadBarrier.barrier(function(a){var b=false;var c=a["imports"];for(var d in c){var e="FIRESPARK_IMPORT_"+c[d];if(Snowblozm.Registry.get(e)||false){}else{b=true;break}}if(b||false){FireSpark.smart.helper.dataState(FireSpark.smart.constant.loaderror);return{valid:false}}a["memory"]["valid"]=true;Snowblozm.Kernel.execute(a["workflow"],a["memory"])},{workflow:b,imports:c,memory:a});var d=false;for(var e in c){var f="FIRESPARK_IMPORT_"+c[e];if(Snowblozm.Registry.get(f)||false){}else{if(d===false){d=true;FireSpark.smart.helper.dataState(FireSpark.smart.constant.loadstatus)}Snowblozm.Kernel.execute([{service:FireSpark.core.service.LoadAjax,url:c[e],type:"html",request:"GET",sync:FireSpark.smart.constant.importsync,workflow:[{service:FireSpark.core.service.DataRegistry,key:f,value:true,check:true},{service:FireSpark.ui.service.ElementContent,element:FireSpark.smart.constant.importdiv,select:true,action:"last",animation:"none",duration:5}]}],{})}}if(d){return{valid:false}}else{FireSpark.core.helper.LoadBarrier.end();return{valid:false}}},output:function(){return[]}};FireSpark.smart.service.DataLoad={input:function(){return{required:["url","workflow"],optional:{data:"",type:"json",request:"POST",process:false,mime:"application/x-www-form-urlencoded",params:[],errorflow:false,stop:false,validity:false,nocache:false,expiry:FireSpark.smart.constant.poolexpiry,force:FireSpark.smart.constant.poolforce,global:false,iframe:false,agent:false,root:false}}},run:function(a){var b=a["workflow"];var c="FIRESPARK_SI_DATA_URL_"+a["url"]+"_DATA_"+a["data"]+"_TYPE_"+a["type"]+"_REQUEST_"+a["request"];if(a["data"]===true){a["data"]=""}b.unshift({service:FireSpark.core.service.DataPush,args:a["params"],output:{result:"data"}});if(a["iframe"]){a["agent"]=a["agent"]?a["agent"]:a["root"];return Snowblozm.Kernel.run({service:FireSpark.core.service.LoadIframe,args:a["args"]},a)}else if(a["force"]===false){var d=Snowblozm.Registry.get(c);if(d){a["data"]=d;if(d["valid"]||false){Snowblozm.Kernel.execute(b,a);return{valid:a["stop"]}}else if(a["errorflow"]){Snowblozm.Kernel.execute(a["errorflow"],a);return{valid:a["stop"]}}}}if(a["nocache"]===false){b.unshift({service:FireSpark.core.service.DataRegistry,input:{value:"data"},key:c,expiry:a["expiry"]})}if(a["global"]){var d=Snowblozm.Registry.get(FireSpark.smart.constant.globalkey);if(d){a["data"]=d;if(d["valid"]||false){Snowblozm.Kernel.execute(b,a);return{valid:a["stop"]}}else if(a["errorflow"]){Snowblozm.Kernel.execute(a["errorflow"],a);return{valid:a["stop"]}}}}return Snowblozm.Kernel.run({service:FireSpark.core.service.LoadAjax,args:a["args"]||false,workflow:b},a)},output:function(){return[]}};FireSpark.smart.helper.dataState=function(a,b){var c=$(FireSpark.smart.constant.statusdiv);var d=c.html();c.html(a).stop(true,true);if(b||false){c.hide().slideDown(500).delay(FireSpark.smart.constant.statusdelay).slideUp(FireSpark.smart.constant.statusduration)}else{c.hide().slideDown(500)}};FireSpark.smart.service.InterfaceHistory={input:function(){return{}},run:function(a){window.onpopstate=function(a){if(a.state){Snowblozm.Kernel.run({service:FireSpark.smart.service.InterfaceUrl,navigator:a.state["nav"],escaped:a.state["escaped"],event:true,save:a.state["hash"],nofrc:true},{})}};a["valid"]=true;return a},output:function(){return[]}};FireSpark.smart.workflow.InterfaceLoad={input:function(){return{optional:{key:FireSpark.smart.constant.defaultkey,id:"0",name:false,ins:"0",cntr:false,lcntr:FireSpark.smart.constant.statusdiv,url:FireSpark.smart.constant.defaulturl,nav:false,tile:false,glb:false,nch:false,exp:FireSpark.smart.constant.poolexpiry,frc:FireSpark.smart.constant.poolforce,iframe:false,agt:false,root:false,bg:false,select:true,ld:FireSpark.smart.constant.loadstatus,anm:"fadein",dur:500,dly:0,act:"first",tpl:"tpl-default",data:"",type:"json",req:"POST",workflow:[{service:FireSpark.ui.service.ContainerRender}],errorflow:[{service:FireSpark.ui.service.ElementContent,args:["lcntr"],input:{element:"lcntr",animation:"anm",duration:"dur",delay:"dly"},select:true,act:"all"}],params:[],stop:false,config:FireSpark.smart.constant.config,navigator:"",mv:FireSpark.smart.constant.moveup,mvdur:FireSpark.smart.constant.moveduration}}},run:function(a){for(var b=0;;b++){if(a[b]||false){}else break}var c=--b;k=$j=0;var d="";if(c>1&&is_numeric(a[c])){a["key"]=a[c-1];d+="&"+$j++ +"="+a[c];a["id"]=a[c];d+="&"+$j++ +"=";b=c-1}else if(c>1&&is_numeric(a[c-1])){a["key"]=a[c-2];d+="&"+$j++ +"="+a[c-1];a["id"]=a[c-1];d+="&"+$j++ +"="+a[c];b=c-2}else{a["key"]=a[k++];d+="&"+$j++ +"="+a[k];a["id"]=a[k++]}while(k<b){d+="&"+$j++ +"="+a[k++]}a["data"]+=d;var e=a["key"];var f=a["key"]+"-"+a["id"];var g=a["workflow"];a["key"]="ui-"+e.replace(/\./g,"-");a["ins"]=a["cntr"]||FireSpark.smart.constant.tileuiprefix+a["ins"];var h=a["navigator"];h=h.replace(/bg\/true\//g,"");a["navigator"]=h=h.replace(/glb\/true\//g,"");var i=h.split("~");if(i[1]||false){var j=i[1].split("/");for(var k=1,l=j.length;k<l;k+=2){a["data"]+="&"+j[k]+"="+j[k+1]}}if(a["nav"]){g=g.concat([{service:FireSpark.core.service.LaunchNavigator,data:[a["nav"]],launch:true,nonstrict:true}])}return Snowblozm.Kernel.execute([{service:FireSpark.ui.service.ElementContent,input:{element:"lcntr",animation:"anm",delay:"dly",duration:"dur",data:"ld"},act:"all",select:true},{service:FireSpark.smart.service.DataLoad,url:FireSpark.smart.constant.importroot+e+FireSpark.smart.constant.importext,args:["lcntr","act","dur","dly","anm","ld"],request:"GET",data:true,type:"json",process:false,mime:"application/x-www-form-urlencoded",params:[],stop:false,cache:true,expiry:false,workflow:[{service:FireSpark.core.service.DataSelect,params:{imports:"imports",tpl:"tpl"}},{service:FireSpark.smart.service.DataImport,args:["tpl","lcntr","act","dur","dly","anm","ld"],workflow:[{service:FireSpark.smart.service.DataLoad,args:["tpl","ins","act","dur","dly","anm","key","id","name","ins","inline","bg","tile","lcntr","ld","mv","mvdur"],url:a["url"],data:"service="+e+"&navigator="+a["navigator"]+"&"+a["data"],validity:true,type:a["type"],request:a["req"],global:a["glb"],nocache:a["nch"],expiry:a["exp"],force:a["frc"],iframe:a["iframe"],agent:a["agt"],root:a["root"],act:a["act"],dur:a["dur"],dly:a["dly"],anm:a["anm"],bg:a["bg"]||a["nav"],mv:a["mv"],mvdur:a["mvdur"],key:a["key"],id:a["id"],name:a["name"],ins:a["ins"],tile:a["tile"],navigator:a["navigator"],params:a["params"].concat(["key","id","name","ins","navigator"]),workflow:g,errorflow:[{service:FireSpark.ui.workflow.TemplateApply,input:{animation:"anm",duration:"dur",delay:"dly"},element:a["lcntr"],select:true,act:"all",tpl:"tpl-default"}]}],errorflow:false}]}],a)},output:function(){return[]}};FireSpark.smart.workflow.InterfaceTab={input:function(){return{required:["cntr","url"],optional:{tabui:"tabuipanel",title:"Krishna",nch:false,exp:FireSpark.smart.constant.poolexpiry,frc:FireSpark.smart.constant.poolforce,iframe:false,agt:false,root:false,select:false,ld:FireSpark.smart.constant.loadmsg,anm:"fadein",dur:1e3,dly:0,act:"all",tpl:"tpl-default",cnf:false,cnfmsg:FireSpark.smart.constant.cnfmsg,sel:false,enc:"url",data:"",type:"json",req:"POST",workflow:false,errorflow:false,params:[],stop:false,ln:false,status:"valid",message:"message"}}},run:function(a){return Snowblozm.Kernel.execute([{service:FireSpark.ui.service.ElementTab},{service:FireSpark.smart.workflow.ReadTmpl}],a)},output:function(){return["element"]}};FireSpark.smart.workflow.InterfaceTile={input:function(){return{optional:{cntr:false,ins:false,child:FireSpark.smart.constant.tileuisection,select:false,tile:false,anm:"fadein",dur:500,dly:0,mv:FireSpark.smart.constant.moveup,mvdur:FireSpark.smart.constant.moveduration}}},run:function(a){a["cntr"]=a["cntr"]||a[1];a["tile"]=a["tile"]||a[0]||false;if(a["tile"]===false){var b=(a["cntr"]||FireSpark.smart.constant.tileuiprefix+a["ins"])+">"+FireSpark.smart.constant.tileuicntr}var c=true;a=Snowblozm.Kernel.execute([{service:FireSpark.ui.service.ElementSection,element:b||false,input:{content:"tile",animation:"anm",duration:"dur",delay:"dly"},select:c}],a);if(Number(a["mv"])){$("body,html").animate({scrollTop:0},a["mvdur"])}return a},output:function(){return["element"]}};FireSpark.smart.service.InterfaceTrigger={input:function(){return{required:["selector","attribute"],optional:{event:"click",escaped:false,hash:false,nav:false}}},run:function(a){$(a["selector"]).live(a["event"],function(){FireSpark.smart.service.InterfaceUrl.idle=false;var b=$(this).attr(a["attribute"]);var c=FireSpark.smart.constant.uicache?!$(this).hasClass("force"):$(this).hasClass("nofrc");if(a["attribute"]=="href"){b=unescape(b)}if(a["nav"]){if(a["nav"]===true){}else{window.history.pushState({nav:a["nav"]+b,escaped:a["escaped"],hash:a["hash"]},"",FireSpark.smart.constant.urlstart+b);b=a["nav"]+b}}$result=Snowblozm.Kernel.run({service:FireSpark.smart.service.InterfaceUrl,navigator:b,escaped:a["escaped"],root:$(this),event:true,save:a["hash"],nofrc:c},{});FireSpark.smart.service.InterfaceUrl.idle=true;return $result["valid"]});a["valid"]=true;return a},output:function(){return[]}};FireSpark.smart.service.InterfaceUrl={idle:true,current:"",path:"#",view:"",input:function(){return{required:["navigator"],optional:{escaped:false,root:false,event:false,save:false,nofrc:false}}},run:function(a){$navigator=a["navigator"];$escaped=a["escaped"];$root=a["root"];$event=a["event"];$save=a["save"];$force=a["nofrc"]?false:true;if(($event||FireSpark.smart.service.InterfaceUrl.idle)&&FireSpark.smart.service.InterfaceUrl.current!=$navigator){if($event&&$navigator[0]=="!"){$navigator=FireSpark.smart.service.InterfaceUrl.path+$navigator}if($save||false){FireSpark.smart.service.InterfaceUrl.current=window.location.hash=$navigator}var b=$navigator.split("!");if(FireSpark.smart.service.InterfaceUrl.path!=b[0]){if($save||false){FireSpark.smart.service.InterfaceUrl.path=b[0]}var c=b[1]||false?"#"+b[1]:false;return{valid:Snowblozm.Kernel.launch(b[0],$escaped,{root:$root,nav:c,frc:$force})}}else if(b[1]||false){b[1]="#"+b[1];if($save||false){FireSpark.smart.service.InterfaceUrl.view=b[1]}return{valid:Snowblozm.Kernel.launch(b[1],$escaped,{root:$root})}}}return{valid:false}},output:function(){return[]}};FireSpark.smart.workflow.ReadHtml={input:function(){return{required:["url","cntr"],optional:{nch:false,exp:FireSpark.smart.constant.poolexpiry,frc:FireSpark.smart.constant.poolforce,iframe:false,agt:false,root:false,select:true,ld:FireSpark.smart.constant.loadmsg,anm:"fadein",dur:1e3,dly:0,act:"all"}}},run:function(a){var b=[{service:FireSpark.ui.service.ElementContent,input:{animation:"anm",duration:"dur",delay:"dly",action:"act"}}];return Snowblozm.Kernel.execute([{service:FireSpark.ui.service.ElementContent,input:{element:"cntr",data:"ld",animation:"anm",action:"act"},duration:5},{service:FireSpark.smart.service.DataLoad,type:"html",request:"GET",args:["element","anm","dur","dly","act"],input:{nocache:"nch",expiry:"exp",force:"frc",agent:"agt"},workflow:b,errorflow:b}],a)},output:function(){return["element"]}};FireSpark.smart.workflow.ReadTmpl={input:function(){return{optional:{url:FireSpark.smart.constant.defaulturl,cntr:FireSpark.smart.constant.statusdiv,nch:false,exp:FireSpark.smart.constant.poolexpiry,frc:FireSpark.smart.constant.poolforce,iframe:false,agt:false,root:false,select:true,ld:FireSpark.smart.constant.loadmsg,anm:"fadein",dur:1e3,dly:0,act:"all",tpl:"tpl-default",cnf:false,cnfmsg:FireSpark.smart.constant.cnfmsg,sel:false,enc:"url",data:"",type:"json",req:"POST",workflow:[{service:FireSpark.ui.workflow.TemplateApply,input:{element:"cntr",template:"tpl",animation:"anm",duration:"dur",delay:"dly",action:"act"},select:true}],errorflow:[{service:FireSpark.ui.service.ElementContent,input:{element:"cntr",animation:"anm",duration:"dur",delay:"dly",action:"act"},select:true}],params:[],stop:false,ln:false,status:"valid",message:"message",vld:false}}},run:function(a){$workflow=[{service:FireSpark.ui.service.ElementState,input:{element:"sel"}},{service:FireSpark.core.service.LaunchMessage,input:{launch:"ln"}}];$workflow=$workflow.concat(a["workflow"]);$errorflow=[{service:FireSpark.ui.service.ElementState,input:{element:"sel"}}];$errorflow=$errorflow.concat(a["errorflow"]);$args=["cntr","sel","tpl","anm","dur","dly","act","ln"];$args=$args.concat(a["args"]);return Snowblozm.Kernel.execute([{service:FireSpark.core.service.WindowConfirm,input:{confirm:"cnf",value:"cnfmsg"}},{service:FireSpark.core.service.DataEncode,input:{type:"enc"},output:{result:"data"}},{service:FireSpark.ui.service.ElementState,input:{element:"sel"},disabled:true},{service:FireSpark.ui.service.ElementContent,input:{element:"cntr",data:"ld",animation:"anm"},action:"all",duration:5},{service:FireSpark.smart.service.DataLoad,args:$args,input:{request:"req",nocache:"nch",expiry:"exp",force:"frc",agent:"agt",validity:"vld"},workflow:$workflow,errorflow:$errorflow}],a)},output:function(){return[]}};FireSpark.smart.workflow.WriteData={input:function(){return{optional:{sel:false,src:"form",cntr:false,pnl:false,chng:"none",url:FireSpark.smart.constant.defaulturl,cls:"data",err:"span",nch:true,exp:FireSpark.smart.constant.poolexpiry,frc:FireSpark.smart.constant.poolforce,iframe:false,agt:false,root:false,select:false,ld:FireSpark.smart.constant.loadmsg,anm:"fadein",dur:1e3,dly:0,act:"all",tpl:FireSpark.ui.constant.defaulttpl,errtpl:FireSpark.ui.constant.defaulttpl,cnf:false,cnfmsg:FireSpark.smart.constant.cnfmsg,slr:false,enc:"url",type:"json",req:"POST",workflow:[{service:FireSpark.ui.service.ElementContent,input:{element:"cntr",animation:"anm",duration:"dur",delay:"dly"},data:"<span></span>",action:"all",select:true},{service:FireSpark.ui.workflow.TemplateApply,input:{element:"pnl",template:"tpl",animation:"anm",duration:"dur",delay:"dly",action:"act"},select:true}],errorflow:[{service:FireSpark.ui.workflow.TemplateApply,input:{element:"cntr",template:"errtpl",animation:"anm",duration:"dur",delay:"dly"},action:"all",select:true}],params:[],stop:false,ln:false,status:"valid",message:"message"}}},run:function(a){a["src"]=a[0]||a["src"];a["sel"]=a[1]||a["sel"];a["pnl"]=a["pnl"]||a["cntr"]||a["sel"]+" .status:last";switch(a["src"]){case"form":var b=a["sel"]+" form";$readflow={service:FireSpark.core.service.ReadForm,form:b,output:{request:"req"}};break;case"div":var b=a["sel"];$readflow={service:FireSpark.core.service.ReadData,input:{cntr:"sel"}};break;default:return{valid:false}}switch(a["chng"]){case"reset":a["workflow"]=[{service:FireSpark.ui.service.ElementTrigger,element:b+" input[type=reset]",event:"click"}].concat(a["workflow"]);break;case"hide":a["workflow"]=[{service:FireSpark.ui.service.ElementContent,element:b,action:"none",animation:"fadeout",duration:150,select:true}].concat(a["workflow"]);break;case"none":default:break}return Snowblozm.Kernel.execute([{service:FireSpark.core.service.CheckForm,form:b,input:{error:"err"}},$readflow,{service:FireSpark.smart.workflow.ReadTmpl,args:["pnl","errtpl"],cntr:a["cntr"]||a["sel"]+" .status:last",sel:a["slt"]||a["sel"]+" input[name=submit]",agt:a["agt"]||a["sel"]+" form",vld:true}],a)},output:function(){return["element"]}};FS.c.c={validations:{required:{cls:".required",helper:FireSpark.core.helper.CheckRequired},email:{cls:".email",helper:FireSpark.core.helper.CheckEmail},match:{cls:".match",helper:FireSpark.core.helper.CheckMatch}},validation_status:"span",loaderror:'<span class="error">Error Loading Data</span>'};FS.u.c={transforms:{uibutton:{cls:".uibutton",helper:FireSpark.ui.helper.transformButton,config:{}},ckeditor:{cls:".ckeditor",helper:FireSpark.ui.helper.transformCKEditor,config:{}},wysiwyg:{cls:".wysiwyg",helper:FireSpark.ui.helper.transformWysiwyg,config:{}},uitabpanel:{cls:".uitabpanel",helper:FireSpark.ui.helper.transformTabpanel,config:{savekey:"tabpanel",select:false,cache:false,collapsible:false,event:"click",tablink:false,indexstart:0}}},maindiv:"#ui-global-0",replacesel:", .ui-replace",defaulttpl:"tpl-default"};FS.s.c={urlstart:"",globalkey:"ui-global-data",statusdiv:"#load-status",statusdelay:1500,statusduration:1500,loaderror:'<span class="error">Error Loading Data</span>',loadstatus:'<span class="state loading">Loading ...</span>',loadmsg:'<span class="loading">Loading ...</span>',initmsg:'<span class="state">Initializing ...</span>',cnfmsg:"Are you sure you want to continue ?",importdiv:"#ui-imports",importroot:"ui/import/",importext:".json",importsync:false,defaultkey:"people.person.info",defaulturl:"run.php",tileuiprefix:"#ui-global-",tileuicntr:".bands",tileuisection:".tile-content",moveup:false,moveduration:850,poolexpiry:150,poolforce:false,config:[],defaultln:"#sync",uicache:true}